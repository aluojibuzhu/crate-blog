## 月度工作进展报告（7.10 ~ 8.10）

### 一、工作总结

作为虚拟化方向的初学者，本月的主要工作围绕不同架构虚拟机的构建、核心组件分析以及接口设计展开，具体如下：

1. **虚拟机构建流程学习与整理**
   学习并分析了多种架构下的虚拟机构建方法，包括 [hvisor_loongarch](https://hvisor.syswonder.org/chap01/Overview.html) 与 [oscomp_arceos_tour_h](https://github.com/arceos-org/oscamp/tree/main/arceos/tour) 等项目，并对构建流程进行总结与文档化：
   - [oscomp_arceos_tour_h 虚拟机构建总结](https://github.com/aluojibuzhu/crate-blog/blob/main/oscomp_arceos_h.md)
   - [hvisor 启动入口分析](https://github.com/aluojibuzhu/crate-blog/blob/main/hvisor.md)
   - [axvisor 启动入口整理](https://github.com/aluojibuzhu/crate-blog/blob/main/arceos%20for%20loongarch_start.md)
   - [axvisor 主函数执行流程及主要文件功能](https://github.com/aluojibuzhu/crate-blog/blob/main/axvisor主执行流.md)
2. **axaddress_space组件分析与功能补全**
   深入分析了 axvisor 依赖的 `axaddress_space` 组件，重点学习了虚拟机二阶段地址翻译原理，并在此基础上编写了测试用例及部分缺失函数（如 `flush_tlb`）：
   - [feat: Add test cases for address_space and implement functions protect and flush_tlb](https://github.com/arceos-hypervisor/axaddrspace/pull/16)
3. **接口设计与跨架构实现参考**
   总结了 axvisor 中上层逻辑与底层架构之间的接口设计，并开始在 hvisor 中查找对应的 LoongArch 实现作为参考：
   - [axvisor 底层架构接口与 hvisor 对应实现对照表（制作中）](https://github.com/aluojibuzhu/crate-blog/blob/main/hvisor%26axvisor拆分表格.md)
   - 分析发现axvisor 与底层架构的交互接口主要集中在 `axvm/src/vcpu`，其核心思路是通过重新导入不同架构的 `Percpu` 与 `Vcpu` 实现。因此，在 axvisor for LoongArch64 中，需要新建 `loongarch64_vcpu` 仓库，并实现 `Percpu`、`Vcpu` 以及必要的 trait（如 `AxArchPerCpu`、`AxArchVCpu`）。
   - axvisor核心数据设计：
     - [VM 设计（含 vcpu 设计）](https://github.com/LearningOS/learning-hypervisor-record-from-chen-hong/blob/main/photo_gallery/axvm.png)
     - [Percpu 设计](https://github.com/LearningOS/learning-hypervisor-record-from-chen-hong/blob/main/photo_gallery/percpu.png)

------

### 二、当前进度与下月计划

1. **当前进度**

   - axvisor 启动入口部分已与谢祖均、姚礼兴同学讨论，由谢祖均提交初版修改，后续计划进行更合理的拆分并将代码放置到更合适的模块位置。
   - 正在整理 axvisor LoongArch64_`vcpu` 模块所需实现的接口与数据结构，并将其拆分为以方法函数为单位的小任务，方便后续分工协作。

2. **下月计划**

   - 通过小组会议确定接口设计方案与任务划分细节。

   - 推进 `loongarch64_vcpu` 仓库的接口与数据结构实现。

   - 深入学习 `oscomp_arceos_tour_u` 系列实验，进一步掌握 LoongArch64 架构特性与底层实现细节。


     


